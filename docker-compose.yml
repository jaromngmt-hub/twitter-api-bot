version: '3.8'

services:
  twitter-monitor:
    build: .
    image: twitter-monitor:latest
    container_name: twitter-monitor
    ports:
      - "8000:8000"
    volumes:
      - ./data:/app/data
      - ./logs:/app/logs
      - ./static:/app/static
    env_file:
      - .env
    command: uvicorn api:app --host 0.0.0.0 --port 8000 --reload
    restart: unless-stopped
    
  # Optional: Run CLI monitor in background
  # monitor:
  #   build: .
  #   image: twitter-monitor:latest
  #   container_name: twitter-monitor-worker
  #   volumes:
  #     - ./data:/app/data
  #     - ./logs:/app/logs
  #   env_file:
  #     - .env
  #   command: python main.py run
  #   restart: unless-stopped
  #   depends_on:
  #     - twitter-monitor
